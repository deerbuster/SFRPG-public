<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
  Please see the license.html file included with this distribution for 
  attribution and copyright information.
-->

<root>
	<windowclass name="charsheet_notes">
		<sheetdata>
			<frame_char name="detailframe">
				<bounds>15,0,480,45</bounds>
			</frame_char>
			<string_labeled name="gender">
				<anchored to="detailframe" position="insidetopleft" offset="15,10" width="50" height="20" />
				<labelres>char_label_gender</labelres>
			</string_labeled>
			<string_labeled name="age">
				<anchored to="gender" position="right" offset="5,0" width="50" />
				<labelres>char_label_age</labelres>
			</string_labeled>
			<string_labeled name="height">
				<anchored to="age" position="right" offset="5,0" width="50" />
				<labelres>char_label_height</labelres>
			</string_labeled>
			<string_labeled name="weight">
				<anchored to="height" position="right" offset="5,0" width="50" />
				<labelres>char_label_weight</labelres>
			</string_labeled>
			<string_labeled name="size">
				<anchored to="weight" position="right" offset="5,0" width="60" />
				<labelres>char_label_size</labelres>
			</string_labeled>
			<string_labeled name="alignment">
				<anchored to="size" position="right" offset="5,0" width="80" />
				<labelres>char_label_alignment</labelres>
			</string_labeled>
			<string_labeled name="deity">
				<anchored to="alignment" position="right" offset="5,0" width="80" />
				<labelres>char_label_deity</labelres>
			</string_labeled>

			<frame_char name="appearanceframe">
				<bounds>20,90,-189,215</bounds>
			</frame_char>
			<label_frametop>
				<anchored to="appearanceframe" />
				<static textres="char_label_appearance" />
			</label_frametop>
			<stringu name="appearance">
				<anchored to="appearanceframe">
					<top offset="30" />
					<left offset="15" />
					<right offset="-20" />
					<bottom offset="-15" />
				</anchored>
				<multilinespacing>20</multilinespacing>
			</stringu>
			<scrollbar>
				<anchored to="appearance" />
				<target>appearance</target>
			</scrollbar>

			<frame_char name="languageframe">
				<bounds>-189,45,160,260</bounds>
			</frame_char>
			<label_frametop>
				<anchored to="languageframe" />
				<static textres="char_label_languages" />
			</label_frametop>
			<list_language name="languages">
				<anchored to="languageframe">
					<top offset="35" />
					<left offset="15" />
					<right offset="-20" />
					<bottom offset="-15" />
				</anchored>
			</list_language>
			<scrollbar>
				<anchored to="languages" />
				<target>languages</target>
			</scrollbar>
			<button_iedit name="languages_iedit">
				<anchored to="languages" position="aboveright" offset="5,5" />
				<target>languages</target>
			</button_iedit>
			<button_iadd name="languages_iadd">
				<anchored to="languages" position="aboveleft" offset="10,5" />
				<target>languages</target>
			</button_iadd>
			<frame_char name="homeworldframe">
				<bounds>20,45,-189,45</bounds>
			</frame_char>
			<linkfield name="homeworldlink">
				<anchored to="homeworldframe" position="insidetopright" offset="10,10" width="20" height="20" />
				<description field="race" />
				<closetoggle />
				<invisible />
				<script>
					function onInit()
						onValueChanged();
					end
					function onValueChanged()
						if isEmpty() then
							setVisible(false);
						else
							setVisible(true);
						end
					end
				</script>
			</linkfield>
			<string_labeled name="homeworld">
				<anchored to="homeworldframe" position="insidetopleft" offset="15,10" height="20">
					<right parent="homeworldlink" anchor="left" offset="-5" />
				</anchored>
				<labelres>char_label_homeworld</labelres>
			</string_labeled>
			<frame_char name="notesframe">
				<bounds>20,305,-29,-5</bounds>
			</frame_char>
			<label_frametop>			
				<anchored to="notesframe" />
				<static textres="char_label_notes" />
			</label_frametop>
			<stringu name="notes">
				<anchored to="notesframe">
					<top offset="30" />
					<left offset="15" />
					<right offset="-20" />
					<bottom offset="-15" />
				</anchored>
				<multilinespacing>20</multilinespacing>
			</stringu>
			<scrollbar>
				<anchored to="notes" />
				<target>notes</target>
			</scrollbar>
		</sheetdata>
	</windowclass>
	
	<template name="list_language">
		<list_text>
			<datasource>.languagelist</datasource>
			<class>char_language</class>
			<sortby><control>name</control></sortby>
			<newfocus>name</newfocus>
			<allowcreate />
			<allowdelete />
			<script>
				function onDrop(x, y, draginfo)
					local sDragType = draginfo.getType();
					if sDragType == "string" or sDragType == "language" then
						local w = addEntry(true);
						w.name.setValue(draginfo.getStringData());
						return true;
					end
				end
			</script>
		</list_text>
	</template>

	<windowclass name="char_language">
		<margins control="0,0,0,2" />
		<script>
			function onInit()
				getDatabaseNode().onDelete = onDelete;
			end

			function onDelete(sourceNode)
				LogManager.onDelete(sourceNode);
			end		
			function onDragStart(button, x, y, draginfo)
				local sLang = name.getValue()
				if sLang ~= "" then
					draginfo.setType("language")
					draginfo.setIcon("button_speak")
					draginfo.setStringData(sLang)
					return true
				end
			end
		</script>
		<sheetdata>
			<genericcontrol name="rightanchor">
				<anchored height="0" width="0">
					<top />
					<right />
				</anchored>
			</genericcontrol>
			<button_idelete name="idelete">
				<anchored>
					<top />
					<right parent="rightanchor" anchor="left" relation="relative" offset="-5" />
				</anchored>
			</button_idelete>
			<string_textlistitem name="name">
				<anchored height="20">
					<top />
					<left />
					<right parent="rightanchor" anchor="left" relation="relative" offset="-5" />
				</anchored>
				<script>
					function onDragStart(...)
						return window.onDragStart(...)
					end
				</script>
			</string_textlistitem>
		</sheetdata>
	</windowclass>
</root>
