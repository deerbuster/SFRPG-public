<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
  Please see the license.html file included with this distribution for 
  attribution and copyright information.
-->

<root>
	<windowclass name="race">
		<frame>recordsheet</frame>
		<placement>
			<size width="400" height="400" />
		</placement>
		<sharable />
		<sizelimits>
			<minimum width="350" height="350" />
			<dynamic />
		</sizelimits>
		<minimize>minimized_reference</minimize>
		<tooltip field="name" />
		<nodelete />
		<playercontrol />
		<sharable />
		<public />
		<script file="campaign/scripts/race.lua" />
		<sheetdata>
			<sub_record_header name="header">
				<class>race_header</class>
			</sub_record_header>

			<frame_record_content_tabbed name="contentframe">
				<anchored>
					<bottom offset="-65" />
				</anchored>
			</frame_record_content_tabbed>
			
			<subwindow_record name="main_pc">
				<class>race_pc_stats</class>
			</subwindow_record>
			<subwindow_record name="main_companion">
				<class>race_comp_stats</class>
			</subwindow_record>
			<subwindow_record name="other">
				<class>race_other</class>
			</subwindow_record>
			<ft_record name="text">
				<anchored to="contentframe" position="over" />
				<invisible />
			</ft_record>
			<scrollbar_record>
				<target>main_pc</target>
			</scrollbar_record>
			<scrollbar_record>
				<target>main_companion</target>
			</scrollbar_record>
			<scrollbar_record>
				<target>other</target>
			</scrollbar_record>
			
			
			<tabs_recordsheet>
				<tab>
					<icon>tab_main</icon>
					<subwindow>main_pc</subwindow>
				</tab>
				<tab>
					<icon>tab_other</icon>
					<subwindow>other</subwindow>
				</tab>
			</tabs_recordsheet>
			<frame_record_lower name="controlframe" />
			<radio_record_racetype name="racetype" source= "racetype"/>
			
			<resize_recordsheet />
			<close_recordsheet />
		</sheetdata>
	</windowclass>
	<windowclass name="race_header">
		<margins control="0,0,0,2" />
		<script>
			function onInit()
				update();
			end
			function update()
				local bReadOnly = WindowManager.getReadOnlyState(getDatabaseNode());
				name.setReadOnly(bReadOnly);
			end
		</script>
		<sheetdata>
			<link_record_header>
				<class>race</class>
			</link_record_header>

			<anchor_record_header_right />
			<icon_record_locked />
			<button_record_locked />

			<string_record_name name="name">
				<empty textres="library_recordtype_empty_race" />
			</string_record_name>
			<label_recordtype name="recordtype">
				<static textres="record_label_race" />
			</label_recordtype>	
		</sheetdata>
	</windowclass>
	
	<windowclass name="race_pc_stats">
		<margins control="0,0,0,7" />
		<script file="campaign/scripts/race_main.lua" />
		<sheetdata>
			<anchor_column name="columnanchor" />
			
			<ft_columnh name="summary" />

			<line_column name="divider" />

			<label_column name="size_label">
				<static textres="race_label_size" />
			</label_column>
			<string_columnh name="size" />	
			<label_column name="type_label">
				<static textres="race_label_type" />
			</label_column>
			<string_columnh name="type" />	
			<label_column name="subtype_label">
				<static textres="race_label_subtype" />
			</label_column>
			<string_columnh name="subtype" />	
			<label_column name="hp_label">
				<static textres="race_label_hitpoints" />
			</label_column>
			<number_columnh name="hp" />	
			
			<header_column name="abilitymods_header">
				<anchor offset="0,30" />
				<static textres="race_header_abilitymods"/>
				<center />
			</header_column>
			<button_iedit name="abilitymods_iedit">
				<anchored to="abilitymods_header" position="righthigh" offset="-20,0" />
				<target>abilitymods</target>
			</button_iedit>
			<button_iadd name="abilitymods_iadd">
				<anchored to="abilitymods_iedit" position="lefthigh" offset="5,0" />
				<target>abilitymods</target>
			</button_iadd>
			<list_mods_column name="abilitymods">
				<datasource>.abilitymodifiers</datasource>
				<class>race_abilitymod</class>				
			</list_mods_column>		
			
			<header_column name="traits_header">
				<anchor offset="0,30" />
				<static textres="race_header_traits"/>
				<center />
			</header_column>
			<button_iedit name="traits_iedit">
				<anchored to="traits_header" position="righthigh" offset="-20,0" />
				<target>traits</target>
			</button_iedit>
			<button_iadd name="traits_iadd">
				<anchored to="traits_iedit" position="lefthigh" offset="5,0" />
				<target>traits</target>
			</button_iadd>
			<list_column name="traits">
				<datasource>.traits</datasource>
				<class>race_trait</class>
			</list_column>
			
		</sheetdata>
	</windowclass>
	<windowclass name="race_comp_stats">
		<margins control="0,0,0,7" />
		<script file="campaign/scripts/race_main.lua" />		
		<sheetdata>
			<anchor_column name="columnanchor" />
			
			<ft_columnh name="summary" />
			
			<line_column name="divider" />
			<label_column name="levelrange_label">
				<static>Level Range</static>
			</label_column>
			<string_columnh name="levelrange" >
				<anchored>
					<top parent="columnanchor" anchor="bottom" relation="relative" offset="7" />
					<left parent="" anchcor="left" offset="97" />
					<right parent="" anchor="right" offset="-120" />
				</anchored>
			</string_columnh>
			<label_column name="size_label">
				<static textres="race_label_size" />
			</label_column>
			<string_columnh name="size" >
				<anchored>
					<top parent="columnanchor" anchor="bottom" relation="relative" offset="7" />
					<left parent="" anchcor="left" offset="97" />
					<right parent="" anchor="right" offset="-120" />
				</anchored>
			</string_columnh>				
							
			<label_column name="type_label">
				<static textres="race_label_type" />
			</label_column>
			<string_columnh name="type" />	
			<label_column name="subtype_label">
				<static textres="race_label_subtype" />
			</label_column>
			<string_columnh name="subtype" />	
			<label_column name="senses_label">
				<static textres="npc_label_senses" />
			</label_column>
			<string_columnh name="senses" />	
			<label_column name="aura_label">
				<static>Aura</static>
			</label_column>
			<string_columnh name="aura" />			
			
			<header_column name="defense_header">
				<anchored>
				<top offset = "20" />
				</anchored>
				<static>DEFENSE</static>
			</header_column>
			<label_column name="fort_label">
				<static textres="class_label_fort" />
			</label_column>
			<cycler_column_classstat name="fort">
				<parameters>
					<labelsres>class_label_save_good|class_label_save_poor</labelsres>
					<values>Good|Poor</values>
				</parameters>
			</cycler_column_classstat>
			
			<label_column name="ref_label">
				<static textres="class_label_ref" />
			</label_column>
			<cycler_column_classstat name="ref">
				<parameters>
					<labelsres>class_label_save_good|class_label_save_poor</labelsres>
					<values>Good|Poor</values>
				</parameters>
			</cycler_column_classstat>
			
			<label_column name="will_label">
				<static textres="class_label_will" />
			</label_column>
			<cycler_column_classstat name="will">
				<parameters>
					<labelsres>class_label_save_good|class_label_save_poor</labelsres>
					<values>Good|Poor</values>
				</parameters>
			</cycler_column_classstat>
			<label_column name="saves_label">
				<static>Saves</static>
			</label_column>
			<string_columnh name="saves" />
			
			<label_column name="defensiveabilities_label">
				<static textres="npc_label_dabilities" />
			</label_column>
			<string_columnh name="defensiveabilities" />
			
			
			<header_column name="offense_header">
				<anchored>
				<top offset = "20" />
				</anchored>
				<static>OFFENSE</static>
			</header_column>
			<label_column name="speed_label">
				<static textres="npc_label_speed" />
			</label_column>
			<string_columnh name="speed" />
			<label_column name="melee_label">
				<static textres="npc_label_melee" />
			</label_column>
			<string_columnh name="melee" />				
			<label_column name="ranged_label">
				<static textres="npc_label_rangedatk" />
			</label_column>
			<string_columnh name="ranged" />			
			<label_column name="space_label">
				<static textres="npc_label_space" />
			</label_column>
			<number_columnh name="space" />
			<label_column name="reach_label">
				<static textres="npc_label_reach" />
			</label_column>
			<number_columnh name="reach" />	
			<label_column name="reachnote_label">
				<static>Reach Note</static>
			</label_column>
			<string_columnh name="reachnote" />
			<label_column name="offensiveabilities_label">
				<static>Offense Abil.</static>
			</label_column>
			<string_columnh name="offensiveabilities" />
			<label_column name="spelllikeabilities_label">
				<static>Spell Like Abil.</static>
			</label_column>
			<string_columnh name="spelllikeabilities" />
			
			
			<header_column name="abilities_header">
				<anchored>
				<top offset = "20" />
				</anchored>
				<static>SKILLS/ABILITY STAT MOD</static>
			</header_column>
			
			<label_column name="abilitymods_label">
				<static>Ability Modifiers</static>
			</label_column>
			<string_columnh name="abilitymods" />				
			<label_column name="skills_label">
				<static>Skills (extra)</static>
			</label_column>
			<string_columnh name="skills" />
			
			<header_column name="special_abilities_header">
				<anchor offset="0,30" />
				<static textres="race_header_specialability"/>
				<center />
			</header_column>
			
			<button_iedit name="specialabilities_iedit">
				<anchored to="special_abilities_header" position="righthigh" offset="-20,0" />
				<target>specialabilities</target>
			</button_iedit>
			<button_iadd name="specialabilities_iadd">
				<anchored to="specialabilities_iedit" position="lefthigh" offset="5,0" />
				<target>specialabilities</target>
			</button_iadd>
			<list_column name="specialabilities">
				<datasource>.specialabilities</datasource>
				<sortby><control>name</control></sortby>
				<class>race_special</class>
			</list_column>
			
		</sheetdata>
	</windowclass>
	<windowclass name="race_other">
		<margins control="0,0,0,7" />
		<script>
			function onInit()
				update();
			end
			function update()
				local bReadOnly = WindowManager.getReadOnlyState(getDatabaseNode());
				text.update(bReadOnly);
			end
		</script>
		<sheetdata>
			<anchor_column name="columnanchor" />
			
			<ft_columnh name="text" />
		</sheetdata>
	</windowclass>
	
	<windowclass name="race_trait">
		<margins control="0,0,0,2" />
		<script>
			function update(bReadOnly)
				name.setReadOnly(bReadOnly);
			end
		</script>
		<sheetdata>
			<anchor_listitem_column_right name="rightanchor" />
			<link_listitem_column name="shortcut">
				<class>racialtrait</class>
			</link_listitem_column>
			<button_listitem_column_delete name="idelete" />
			
			<string_listitem_column_name name="name">
				<empty textres="library_recordtype_empty_racialtrait" />
			</string_listitem_column_name>
		</sheetdata>
	</windowclass>
	<windowclass name="race_special">
		<margins control="0,0,0,2" />
		<script>
			function update(bReadOnly)
				name.setReadOnly(bReadOnly);
			end
		</script>
		<sheetdata>
			<anchor_listitem_column_right name="rightanchor" />
			<link_listitem_column name="shortcut">
				<class>racialspecial</class>
			</link_listitem_column>
			<button_listitem_column_delete name="idelete" />
			
			<string_listitem_column_name name="name">
				<empty textres="library_recordtype_empty_racialspecial" />
			</string_listitem_column_name>				
		</sheetdata>
	</windowclass>
	<windowclass name="race_abilitymod"> 
		<margins control="0,0,0,2" />
		<script>
			function update(bReadOnly)
				stat.setReadOnly(bReadOnly);
				mod.setReadOnly(bReadOnly);
				if mod.getValue() == 0 then
					mod.setVisible(false);
					stat.setVisible(false);
				end
				
			end
		</script>
		<sheetdata>
			<anchor_listitem_column_right name="rightanchor" />
			<button_listitem_column_delete name="idelete" />
			
			<cycler_listitem_column_mod name="stat" />
			<string_listitem_column_mod name="mod" />
		</sheetdata>
	</windowclass>
	<windowclass name="race_comp_abilitymod"> 
		<margins control="0,0,0,2" />
		<script>
			function update(bReadOnly)
				stat.setReadOnly(bReadOnly);
				mod.setReadOnly(bReadOnly);				
				mod.setVisible(false);							
			end
		</script>
		<sheetdata>
			<anchor_listitem_column_right name="rightanchor" />
			<button_listitem_column_delete name="idelete" />
			
			<cycler_listitem_column_mod name="stat" />
			<string_listitem_column_mod name="mod" />
		</sheetdata>
	</windowclass>
	<windowclass name="racialtrait">
		<frame>recordsheet</frame>
		<placement>
			<size width="350" height="350" />
		</placement>
		<sizelimits>
			<minimum width="300" height="300" />
			<dynamic />
		</sizelimits>
		<minimize>minimized_reference</minimize>
		<tooltip field="name" />
		<script>
			function onLockChanged()
				if header.subwindow then
					header.subwindow.update();
				end
				
				local bReadOnly = WindowManager.getReadOnlyState(getDatabaseNode());
				text.setReadOnly(bReadOnly);
			end
		</script>
		<sheetdata>
			<sub_record_header name="header">
				<class>racialtrait_header</class>
			</sub_record_header>

			<frame_record_content />
			<ft_record name="text">
				<anchored to="contentframe" position="over" />
				<footer>footer_wide</footer>
			</ft_record>
			<scrollbar>
				<anchored to="text" />
				<target>text</target>
			</scrollbar>
			
			<resize_recordsheet />
			<close_recordsheet />
		</sheetdata>
	</windowclass>
	<windowclass name="racialtrait_header">
		<margins control="0,0,0,2" />
		<script>
			function onInit()
				update();
			end
			function update()
				local bReadOnly = WindowManager.getReadOnlyState(getDatabaseNode());
				name.setReadOnly(bReadOnly);
			end
		</script>
		<sheetdata>
			<link_record_header>
				<class>racialtrait</class>
			</link_record_header>

			<anchor_record_header_right />
			<icon_record_locked />
			<button_record_locked />

			<string_record_name name="name">
				<empty textres="library_recordtype_empty_racialtrait" />
			</string_record_name>
			<label_recordtype name="recordtype">
				<static textres="record_label_racialtrait" />
			</label_recordtype>	
		</sheetdata>
	</windowclass>
	<windowclass name="racialspecial">
		<frame>recordsheet</frame>
		<placement>
			<size width="350" height="350" />
		</placement>
		<sizelimits>
			<minimum width="300" height="300" />
			<dynamic />
		</sizelimits>
		<minimize>minimized_reference</minimize>
		<tooltip field="name" />
		<script>
			function onLockChanged()
				if header.subwindow then
					header.subwindow.update();
				end
				
				local bReadOnly = WindowManager.getReadOnlyState(getDatabaseNode());
				text.setReadOnly(bReadOnly);
			end
		</script>
		<sheetdata>
			<sub_record_header name="header">
				<class>racialspecial_header</class>
			</sub_record_header>

			<frame_record_content />
			<ft_record name="text">
				<anchored to="contentframe" position="over" />
				<footer>footer_wide</footer>
			</ft_record>
			<scrollbar>
				<anchored to="text" />
				<target>text</target>
			</scrollbar>
			
			<resize_recordsheet />
			<close_recordsheet />
		</sheetdata>
	</windowclass>
	<windowclass name="racialspecial_header">
		<margins control="0,0,0,2" />
		<script>
			function onInit()
				update();
			end
			function update()
				local bReadOnly = WindowManager.getReadOnlyState(getDatabaseNode());
				name.setReadOnly(bReadOnly);
			end
		</script>
		<sheetdata>
			<link_record_header>
				<class>racialspecial</class>
			</link_record_header>

			<anchor_record_header_right />
			<icon_record_locked />
			<button_record_locked />

			<string_record_name name="name">
				<empty textres="library_recordtype_empty_racialspecial" />
			</string_record_name>
			<label_recordtype name="recordtype">
				<static textres="record_label_racialspecial" />
			</label_recordtype>	
		</sheetdata>
	</windowclass>
	
	
</root>
